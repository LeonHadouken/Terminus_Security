–í–æ—Ç –∞–∫–∫—É—Ä–∞—Ç–Ω–æ ¬´–ø—Ä–∏—á–µ—Å–∞–Ω–Ω–∞—è¬ª –≤–µ—Ä—Å–∏—è ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–æ, –±–µ–∑ –≤–æ–¥—ã, –≤ —Ñ–æ—Ä–º–∞—Ç–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

---

# COMPLETE SERVER SECURITY SCRIPT v2.0

–°–∫—Ä–∏–ø—Ç –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤ **Debian / Ubuntu**.
–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –≤ —Ä–µ–∂–∏–º **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ hardening**: –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –ø–æ SSH-–∫–ª—é—á–∞–º, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤, –∞–∫—Ç–∏–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞—É–¥–∏—Ç.

---

## üîê –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### SSH Hardening

* –ü–æ–ª–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤—Ö–æ–¥–∞ –ø–æ –ø–∞—Ä–æ–ª—é
* –ó–∞–ø—Ä–µ—Ç root-–¥–æ—Å—Ç—É–ø–∞ –ø–æ –ø–∞—Ä–æ–ª—é
* –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è **—Ç–æ–ª—å–∫–æ –ø–æ Ed25519-–∫–ª—é—á–∞–º**
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ SSH-–ø–æ—Ä—Ç–∞

### Firewall (UFW)

* –ü–æ–ª–∏—Ç–∏–∫–∞: **deny incoming / allow outgoing**
* SSH –¥–æ—Å—Ç—É–ø **—Ç–æ–ª—å–∫–æ —Å –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ IP**
* –û—Ç–∫—Ä—ã—Ç—ã –ø–æ—Ä—Ç—ã:

  * `80/tcp`
  * `443/tcp`

### Fail2Ban

* –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –ø—Ä–æ—Ç–∏–≤ –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞
* –ó–∞—â–∏—Ç–∞ SSH
* Web-—Ñ–∏–ª—å—Ç—Ä—ã (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ Nginx)
* –ë–∞–Ω –ø–æ IP —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### Telegram Monitoring

* –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ **PAM**
* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram:

  * —É—Å–ø–µ—à–Ω—ã–µ SSH-–≤—Ö–æ–¥—ã
  * –Ω–µ—É–¥–∞—á–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞
  * –∏—Ç–æ–≥–æ–≤—ã–µ –æ—Ç—á—ë—Ç—ã

### –ó–∞—â–∏—Ç–∞ –ª–æ–≥–æ–≤

* `chattr +a` –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ª–æ–≥–æ–≤
* –ó–∞–ø—Ä–µ—Ç —É–¥–∞–ª–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏ –ª–æ–≥–æ–≤

### –°–∏—Å—Ç–µ–º–Ω—ã–π –∞—É–¥–∏—Ç (auditd)

–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

* `/etc/passwd`
* `/etc/shadow`
* `/etc/group`
* `/etc/sudoers`
* –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –æ—Ç `root`

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:

* **Fail2Ban**
* **RKHunter**
* **Chkrootkit**
* **AIDE**
* **Lynis**
* **ClamAV**

### Honeypot

* –§–µ–π–∫–æ–≤—ã–π SSH-—Å–µ—Ä–≤–∏—Å –Ω–∞ –ø–æ—Ä—Ç—É `2222`
* –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –±–æ—Ç–æ–≤ –∏ —Å–∫–∞–Ω–µ—Ä–æ–≤

### –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á—ë—Ç

* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π cron-–æ—Ç—á—ë—Ç –≤ Telegram:

  * –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–æ–≥–∏–Ω–æ–≤
  * –∞–∫—Ç–∏–≤–Ω—ã–µ –±–∞–Ω—ã
  * —Å–æ—Å—Ç–æ—è–Ω–∏–µ Fail2Ban
  * —Å–æ–±—ã—Ç–∏—è auditd

---

## üß± –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–æ–¥—É–ª—å–Ω–æ.

```
.
‚îú‚îÄ‚îÄ config.conf
‚îú‚îÄ‚îÄ secure_server.sh
‚îî‚îÄ‚îÄ lib
    ‚îú‚îÄ‚îÄ ui.sh
    ‚îú‚îÄ‚îÄ network.sh
    ‚îú‚îÄ‚îÄ protection.sh
    ‚îú‚îÄ‚îÄ monitoring.sh
    ‚îî‚îÄ‚îÄ tools.sh
```

### –û–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

| –§–∞–π–ª / –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è   | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                                          |
| ------------------- | ------------------------------------------------------------------- |
| `config.conf`       | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (IP, –ø–æ—Ä—Ç—ã, Telegram). **–†–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º** |
| `secure_server.sh`  | –ì–ª–∞–≤–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –∑–∞–ø—É—Å–∫–∞                                            |
| `lib/ui.sh`         | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ü–≤–µ—Ç–∞, Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è                            |
| `lib/network.sh`    | SSH, –∫–ª—é—á–∏, UFW                                                     |
| `lib/protection.sh` | Fail2Ban, auditd, –∑–∞—â–∏—Ç–∞ –ª–æ–≥–æ–≤                                      |
| `lib/monitoring.sh` | PAM-–∞–ª–µ—Ä—Ç—ã, cron-–æ—Ç—á—ë—Ç—ã                                             |
| `lib/tools.sh`      | –°–∫–∞–Ω–µ—Ä—ã, honeypot, —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏                                  |

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

* –û–°: **Ubuntu 20.04+** –∏–ª–∏ **Debian**
* –ó–∞–ø—É—Å–∫ –æ—Ç **root**
* Telegram-–±–æ—Ç:

  * BOT TOKEN
  * CHAT ID
* `sshpass` (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

---

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config.conf`:

```bash
# Telegram
TELEGRAM_BOT_TOKEN="–í–ê–®_–¢–û–ö–ï–ù"
TELEGRAM_CHAT_ID="–í–ê–®_CHAT_ID"

# Network
YOUR_IP="–í–ê–®_–í–ù–ï–®–ù–ò–ô_IP"   # –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û
SSH_PORT="22"
```

‚ö†Ô∏è **–û—à–∏–±–∫–∞ –≤ IP = –ø–æ—Ç–µ—Ä—è SSH-–¥–æ—Å—Ç—É–ø–∞**

---

### 3. –ó–∞–ø—É—Å–∫

```bash
chmod +x secure_server.sh
sudo ./secure_server.sh
```

–í–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç:

* —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç Ed25519-–∫–ª—é—á
* –∑–∞–ø—Ä–æ—Å–∏—Ç –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –º–∞—à–∏–Ω—ã
* –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –∫–ª—é—á
* —É–¥–∞–ª–∏—Ç –ø–∞—Ä–æ–ª—å –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏

---

## ‚úÖ –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞

```bash
ssh -p 22 user@server_ip
```

* –≤—Ö–æ–¥ –ø–æ –ø–∞—Ä–æ–ª—é ‚Äî **–∑–∞–ø—Ä–µ—â—ë–Ω**
* –≤—Ö–æ–¥ –ø–æ –∫–ª—é—á—É ‚Äî **—Ä–∞–∑—Ä–µ—à—ë–Ω**

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

* —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
* —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ª–æ–≥–∏–Ω–∞—Ö
* –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á—ë—Ç—ã –≤ Telegram

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

* –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `YOUR_IP` —É–∫–∞–∑–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
* –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–∞ **—á–∏—Å—Ç–æ–º —Å–µ—Ä–≤–µ—Ä–µ**
* –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ —Å–¥–µ–ª–∞–π—Ç–µ snapshot / backup

---
